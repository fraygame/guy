(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{388:function(t,e,n){"use strict";n.r(e);var r=n(793),i=n.n(r),a=n(804),o=n.n(a),c=n(1),s=n.n(c),u=n(2),l=n.n(u),d=n(5);function h(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,i)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){y(a,r,i,o,c,"next",t)}function c(t){y(a,r,i,o,c,"throw",t)}o(void 0)}))}}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=n(19).observeForIntersection,g=function(t){var e=s()(t,'image_list["image/jpeg"].images',[]);if(!Array.isArray(e))return"";var n=e.filter((function(t){return t.width>320&&t.width<960})).pop();return n?n.url:""},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return'\n  <h3 class="rr-heading headline-bold">'.concat(t.dataset.title,'</h3>\n  <a href="').concat(e.url).concat(t.dataset.tracking?"?".concat(t.dataset.tracking):"",'" class="" data-popular-link>\n    <div class="">\n      <figure class="figure image-figure-image" data-type="img" data-e2e-name="image-figure-image" data-media-container="image" style="">\n        <img src="').concat(g(e),'" data-alt="').concat(e.title,'" data-title="').concat(e.title,'" data-class="popular-post-image">\n      </figure>\n    </div>\n    <h4 class="popular-post-title headline-bold">').concat(e.title,"</h4>\n  </a>\n")},k="sticky-rail-ad-container",A=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rail=e,this.recirc=e.querySelector(".popular-recirc"),this.header=document.querySelector("header"),this.content=document.getElementById("l-content"),this.stickyAd=this.rail.querySelector(".".concat(k,":last-child")),this.stickyAd||(this.stickyAd=this.rail.querySelector(".".concat(k))),this.stickyAd&&(this.ad=this.stickyAd.querySelector("[data-bi-ad]"),this.observe(),this.build(),this.bind())}var e,n,r,a;return e=t,(n=[{key:"build",value:function(){var t=this,e=this.content.offsetHeight,n=this.stickyAd.offsetHeight,r=document.querySelector(".post-content-bottom"),a=o()(e/n)||2;!r&&a>4&&(a=4);var c=this.ad.getAttribute("id"),s=this.ad.getAttribute("data-tile-order");s=s?parseInt(s.replace("tile-",""),10):1;var u=this.stickyAd;i()(a).forEach((function(e){s+=1;var n=document.createElement("div");n.classList.add(k),n.classList.add("container-".concat(e+2));var r=t.ad.cloneNode();r.setAttribute("id","".concat(c,"_dynamic_").concat(e)),r.setAttribute("data-tile-order","tile-".concat(s)),r.setAttribute("data-buffer",3),n.appendChild(r),u.parentNode.insertBefore(n,u.nextSibling),u=n})),this.stickyItems=document.querySelectorAll(".".concat(k))}},{key:"transitionEnd",value:function(t,e){var n=e.target;(n.classList.contains("subnav-ad-layout")||n.classList.contains("subnav-ad-leave-behind"))&&this.sticky()}},{key:"bind",value:function(){l.a.subscribe(d.SCROLL,this.sticky.bind(this)),l.a.subscribe(d.TRANSITION_END,this.transitionEnd.bind(this))}},{key:"observe",value:function(){var t={target:this.recirc,cb:this.hydrate.bind(this)};b(t)}},{key:"hydrate",value:(a=p(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this,fetch("/ajax/popular-posts?section=".concat(this.recirc.dataset.section||"")).then(function(){var t=p(regeneratorRuntime.mark((function t(n){var r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:if(r=t.sent,i=s()(r,"data.items[0]")){t.next=6;break}return t.abrupt("return");case 6:a=m(e.recirc,i),e.recirc.innerHTML=a;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log("RR - HYDRATE ERROR",t)}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"sticky",value:function(){var t=document.querySelector(".subnav-ad-leave-behind.has-ad.leave-behind-stuck"),e=document.querySelector(".subnav-ad-layout.subnav-ad-position-sticky:not(.timed-scroll)"),n=this.header.offsetHeight;if(t){var r=t.getBoundingClientRect(),i=r.top,a=void 0===i?0:i,o=r.height;n=a+(void 0===o?0:o)}else if(e){var c=e.getBoundingClientRect(),s=c.top,u=void 0===s?0:s,l=c.height;n=u+(void 0===l?0:l)}n=Math.max(n,this.header.offsetHeight),n+=12,this.rail.style.setProperty("--sticky-top","".concat(n,"px"))}}])&&v(e.prototype,n),r&&v(e,r),t}();e.default=function(t){h(t).forEach((function(t){return new A(t)}))}}}]);